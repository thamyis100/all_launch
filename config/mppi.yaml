controller_server:
  ros__parameters:
    use_sim_time: True
    controller_frequency: 20.0
    controller_plugins: ["MPPI"]

    MPPI:
      plugin: "nav2_mppi_controller::MPPIController"
      # dynamics / integration
      model_dt: 0.05
      horizon_steps: 20        # increased from 15 so the cost reaches further toward the goal

      # sampling / compute budget
      num_particles: 150       # slightly lower -> cheaper iterations so we can run more iterations
      iteration_count: 5       # increased so optimizer has time to improve trajectories

      # control limits (keep omni)
      v_x_max: 0.6
      v_y_max: 0.6
      w_max: 1.0               # respects your peak angular speed

      # exploration / weighting
      temperature: 1.0         # higher -> more exploration among samples (avoid immediately conservative picks)
      gamma: 0.95              # discount factor for future costs

      # diagnostics / visualization (useful while debugging)
      visualize: true          # shows sampled trajectories / predictions in RViz if supported
